<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Extremely Serious Valentine Research</title>
  <style>
    :root { --pink:#ff5c8a; --bg:#fff6f8; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      text-align:center;
      padding: 28px 14px;
      overflow-x:hidden;
    }
    .card{
      background:#fff;
      max-width: 520px;
      margin: 0 auto;
      padding: 26px 20px;
      border-radius: 18px;
      box-shadow: 0 12px 32px rgba(0,0,0,.12);
      position:relative;
    }
    h2,h3{ margin: 0 0 10px; }
    p{ margin: 10px 0; line-height:1.35; }
    .muted{ opacity:.75; font-size: 14px; }
    .row{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top: 14px; }
    button{
      padding: 12px 18px;
      border:0;
      border-radius: 999px;
      cursor:pointer;
      font-size:16px;
      background: var(--pink);
      color:#fff;
      transition: transform .08s ease;
      user-select:none;
    }
    button:active{ transform: scale(.98); }
    .ghost{
      background:#fff;
      color:#222;
      border:1px solid rgba(0,0,0,.12);
    }
    .hidden{ display:none; }

    /* progress bar */
    .bar{
      width:100%;
      background: rgba(0,0,0,.08);
      border-radius: 999px;
      overflow:hidden;
      height: 14px;
      margin: 12px 0 0;
    }
    .fill{
      height:100%;
      width: 0%;
      background: var(--pink);
      transition: width .8s ease;
    }

    /* floating hearts */
    .heart{
      position: fixed;
      bottom: -20px;
      font-size: 18px;
      animation: floatUp 3.8s linear forwards;
      pointer-events:none;
      opacity:.9;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }
    @keyframes floatUp{
      from { transform: translateY(0) translateX(0) scale(1); opacity: .9; }
      to   { transform: translateY(-110vh) translateX(var(--drift)) scale(1.25); opacity: 0; }
    }

    /* runaway button container */
    .runArea{
      position: relative;
      height: 120px;
      margin-top: 14px;
      border-radius: 14px;
      background: rgba(255,92,138,.06);
      border: 1px dashed rgba(255,92,138,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    #noBtn, #noBtn2{
      position:absolute;
      left: 55%;
      top: 55%;
      transform: translate(-50%,-50%);
    }

    .badge{
      display:inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,92,138,.12);
      color:#b6002f;
      font-size: 13px;
      margin-bottom: 10px;
    }

    .footer{
      margin-top: 12px;
      font-size: 12px;
      opacity:.7;
    }
  </style>
</head>
<body>

<!-- STEP 1 -->
<div class="card" id="step1">
  <div class="badge">Berlin â†’ Prishtina Lab ğŸ§ª</div>
  <h2>Extremely Serious Valentine Research</h2>
  <p class="muted">Please answer honestly. The algorithm is sensitive.</p>

  <p><strong>Q1:</strong> Cka eshte ma e shtire?</p>
  <div class="row">
    <button onclick="q1Option1()">Une qe sjom ne Kosove</button>
    <button onclick="q1Option2()">Pretending this quiz isnâ€™t cute</button>
  </div>

  <div class="footer">Powered by: bad jokes & good intentions</div>
</div>

<!-- STEP 1A (OPTION 1 RESULT) -->
<div class="card hidden" id="step1a">
  <h3>Awwww :( I miss you too</h3>
  <p class="muted">(click to continue)</p>
  <button onclick="goStep2()">Vazhdo â</button>
</div>

<!-- STEP 1B (OPTION 2 RESULT) -->
<div class="card hidden" id="step1b">
  <h3>Dmth qenka cute a?</h3>
  <p class="muted">Be honest ğŸ˜Œ</p>

  <div class="row">
    <button onclick="q1bYes()">Yes</button>
  </div>

  <div class="runArea" id="runArea2">
    <span class="muted">Try pressing â€œNoâ€ if you dare ğŸ‘‡</span>
    <button class="ghost" id="noBtn2">No ğŸ™ƒ</button>
  </div>

  <p id="q1bMsg" style="margin-top:16px;"></p>
  <button class="hidden" id="q1bNext" onclick="goStep2()">Next â</button>
</div>

<!-- STEP 2 (NEW Q2) -->
<div class="card hidden" id="step2">
  <h3>Q2: Be honest â€” cka do ishte vibe nese isha kon aty?</h3>
  <p class="muted">(This quiz will not judge you. Probably.)</p>

  <div class="row">
    <button onclick="q2Option('Ufff, hopefully hugs included ğŸ« ')">Calm and cozy</button>
<button onclick="q2Option(&quot;It's number 3, ajo ne Mitro ka qene 2.5. FLM KLB!!&quot;)">Ishem shty a eshte date numer 3 apo 4!!</button>
    <button onclick="q2Option('I know right, se ki idene sa jom tu e enjoy making this')">Why is this actually cute?</button>
  </div>
</div>

<!-- STEP 2A (Q2 RESPONSE PAGE) -->
<div class="card hidden" id="step2a">
  <h3 id="q2MsgTitle">Noted âœ…</h3>
  <p id="q2Msg" style="margin-top:12px;"></p>
  <button onclick="goStep3()">Vazhdo â</button>
</div>

<!-- STEP 3 -->
<div class="card hidden" id="step3">
  <h3>Distance Calculator ğŸ“</h3>
  <p>Berlin â Prishtina</p>
  <p><strong>Physical distance:</strong> ~1,300 km (rude)</p>
  <p><strong>Travel time:</strong> too many hours (also rude)</p>

  <p style="margin-top:14px;"><strong>Measuring emotional distanceâ€¦</strong></p>
  <div class="bar"><div class="fill" id="fill"></div></div>
  <p id="emoText" class="muted">Processingâ€¦</p>

  <p style="margin-top:18px;"><strong>Bonus question:</strong> Will you be my Valentine?</p>
  <p class="muted">No pressure. This is a â€œsmile request.â€</p>

  <button onclick="yesVal()">Yes ğŸ˜„</button>

  <div class="runArea" id="runArea">
    <span class="muted">Try pressing â€œNoâ€ if you dare ğŸ‘‡</span>
    <button class="ghost" id="noBtn">No ğŸ™ƒ</button>
  </div>

  <p id="result" style="margin-top:16px;"></p>
</div>

<script>
  // --- navigation ---
  function showStep(n){
    document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
    document.getElementById('step' + n).classList.remove('hidden');
  }

  // Q1 branching
  function q1Option1(){
    popHearts(6);
    showStep('1a');
  }

  function q1Option2(){
    popHearts(6);
    showStep('1b');
  }

  function q1bYes(){
    popHearts(14);
    const msg = document.getElementById('q1bMsg');
    msg.innerHTML = "<strong>I knew it &lt;3</strong>";
    document.getElementById('q1bNext').classList.remove('hidden');
  }

  function goStep2(){
    showStep(2);
  }

  // Q2 -> message page -> step3
  function q2Option(message){
    popHearts(10);
    document.getElementById('q2Msg').innerHTML = "<strong>" + message + "</strong>";
    showStep('2a');
  }

  function goStep3(){
    showStep(3);
    startEmoMeter();
  }

  // --- emotional distance meter ---
  function startEmoMeter(){
    const fill = document.getElementById('fill');
    const emoText = document.getElementById('emoText');
    fill.style.width = '0%';
    emoText.textContent = 'Processingâ€¦';

    const steps = [
      {w: 22, t: 'Calibrating vibesâ€¦'},
      {w: 55, t: 'Accounting for missing you a littleâ€¦'},
      {w: 82, t: 'Removing â€œdistanceâ€ from the equationâ€¦'},
      {w: 100, t: 'Result: âŒ Not even close.'}
    ];

    let i = 0;
    const timer = setInterval(() => {
      fill.style.width = steps[i].w + '%';
      emoText.textContent = steps[i].t;
      i++;
      if(i >= steps.length) clearInterval(timer);
    }, 900);
  }

  // --- runaway NO button (generic) ---
  function moveNo(btnId, areaId){
    const btn = document.getElementById(btnId);
    const ar = document.getElementById(areaId);
    if(!btn || !ar) return;

    const a = ar.getBoundingClientRect();
    const b = btn.getBoundingClientRect();
    const pad = 10;

    const maxX = a.width - b.width - pad;
    const maxY = a.height - b.height - pad;

    const x = Math.max(pad, Math.floor(Math.random() * maxX));
    const y = Math.max(pad, Math.floor(Math.random() * maxY));

    btn.style.left = x + 'px';
    btn.style.top = y + 'px';
    btn.style.transform = 'none';
  }

  // hookup dodge behavior
  document.addEventListener('DOMContentLoaded', () => {
    // step3 No button
    const btn1 = document.getElementById('noBtn');
    if(btn1){
      btn1.addEventListener('mouseenter', () => { moveNo('noBtn','runArea'); popHearts(2); });
      btn1.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo('noBtn','runArea'); popHearts(2); }, {passive:false});
      setTimeout(() => moveNo('noBtn','runArea'), 250);
    }

    // step1b No button
    const btn2 = document.getElementById('noBtn2');
    if(btn2){
      btn2.addEventListener('mouseenter', () => { moveNo('noBtn2','runArea2'); popHearts(2); });
      btn2.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo('noBtn2','runArea2'); popHearts(2); }, {passive:false});
      setTimeout(() => moveNo('noBtn2','runArea2'), 250);
    }
  });

  // --- YES handler (final) ---
  function yesVal(){
    popHearts(18);
    const lines = [
      "Okay wow. Thatâ€™s adorable ğŸ˜„",
      "Official verdict: you just made my day.",
      "Long distance: 1 â€” Us: 100."
    ];
    document.getElementById('result').innerHTML =
      "<strong>" + lines[Math.floor(Math.random()*lines.length)] + "</strong><br><span class='muted'>Happy Valentineâ€™s Day ğŸ’›</span>";
  }

  // --- floating hearts ---
  function popHearts(n){
    const emojis = ["ğŸ’›","ğŸ’—","ğŸ’˜","ğŸ’“","âœ¨"];
    for(let i=0;i<n;i++){
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      h.style.left = Math.floor(Math.random()*100) + "vw";
      h.style.setProperty('--drift', (Math.floor(Math.random()*80)-40) + "px");
      h.style.fontSize = (14 + Math.random()*18) + "px";
      h.style.animationDuration = (2.6 + Math.random()*2.4) + "s";
      document.body.appendChild(h);
      setTimeout(() => h.remove(), 4200);
    }
  }
</script>

</body>
</html>
