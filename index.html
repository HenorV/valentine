<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Extremely Serious Valentine Research</title>
  <style>
    :root { --pink:#ff5c8a; --bg:#fff6f8; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      text-align:center;
      padding: 28px 14px;
      overflow-x:hidden;
    }
    .card{
      background:#fff;
      max-width: 520px;
      margin: 0 auto;
      padding: 26px 20px;
      border-radius: 18px;
      box-shadow: 0 12px 32px rgba(0,0,0,.12);
      position:relative;
    }
    h2,h3{ margin: 0 0 10px; }
    p{ margin: 10px 0; line-height:1.35; }
    .muted{ opacity:.75; font-size: 14px; }
    .row{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top: 14px; }
    button{
      padding: 12px 18px;
      border:0;
      border-radius: 999px;
      cursor:pointer;
      font-size:16px;
      background: var(--pink);
      color:#fff;
      transition: transform .08s ease;
      user-select:none;
    }
    button:active{ transform: scale(.98); }
    .ghost{
      background:#fff;
      color:#222;
      border:1px solid rgba(0,0,0,.12);
    }
    .hidden{ display:none; }

    /* progress bar */
    .bar{
      width:100%;
      background: rgba(0,0,0,.08);
      border-radius: 999px;
      overflow:hidden;
      height: 14px;
      margin: 12px 0 0;
    }
    .fill{
      height:100%;
      width: 0%;
      background: var(--pink);
      transition: width .8s ease;
    }

    /* floating hearts */
    .heart{
      position: fixed;
      bottom: -20px;
      font-size: 18px;
      animation: floatUp 3.8s linear forwards;
      pointer-events:none;
      opacity:.9;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }
    @keyframes floatUp{
      from { transform: translateY(0) translateX(0) scale(1); opacity: .9; }
      to   { transform: translateY(-110vh) translateX(var(--drift)) scale(1.25); opacity: 0; }
    }

    /* runaway button container */
    .runArea{
      position: relative;
      height: 120px;
      margin-top: 14px;
      border-radius: 14px;
      background: rgba(255,92,138,.06);
      border: 1px dashed rgba(255,92,138,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    #noBtn{
      position:absolute;
      left: 55%;
      top: 55%;
      transform: translate(-50%,-50%);
    }

    .badge{
      display:inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,92,138,.12);
      color:#b6002f;
      font-size: 13px;
      margin-bottom: 10px;
    }

    .footer{
      margin-top: 12px;
      font-size: 12px;
      opacity:.7;
    }
  </style>
</head>
<body>

<div class="card" id="step1">
  <div class="badge">Berlin â†’ Prishtina Lab ğŸ§ª</div>
  <h2>Extremely Serious Valentine Research</h2>
  <p class="muted">Please answer honestly. The algorithm is sensitive.</p>
  <p><strong>Q1:</strong> Whatâ€™s harder?</p>
  <div class="row">
    <button onclick="pick('Correct âœ…', 2)">Long distance</button>
    <button onclick="pick('Also correct âœ…', 2)">Pretending this isnâ€™t cute</button>
  </div>
  <div class="footer">Powered by: bad jokes & good intentions</div>
</div>

<div class="card hidden" id="step2">
  <h3>Q2: Best way to survive Valentineâ€™s Day?</h3>
  <p class="muted">Select one. (All choices are suspiciously correct.)</p>
  <div class="row">
    <button onclick="pick('Excellent choice ğŸ§ ', 3)">Chocolate</button>
    <button onclick="pick('Thatâ€™s the vibe ğŸ˜„', 3)">Laughing at something dumb</button>
    <button onclick="pick('Wow, so youâ€™re smart-smart ğŸ˜Œ', 3)">This exact page</button>
  </div>
</div>

<div class="card hidden" id="step3">
  <h3>Distance Calculator ğŸ“</h3>
  <p>Berlin â Prishtina</p>
  <p><strong>Physical distance:</strong> ~1,300 km (rude)</p>
  <p><strong>Travel time:</strong> too many hours (also rude)</p>

  <p style="margin-top:14px;"><strong>Measuring emotional distanceâ€¦</strong></p>
  <div class="bar"><div class="fill" id="fill"></div></div>
  <p id="emoText" class="muted">Processingâ€¦</p>

  <p style="margin-top:18px;"><strong>Bonus question:</strong> Will you be my Valentine?</p>
  <p class="muted">No pressure. This is a â€œsmile request.â€</p>

  <button onclick="yesVal()">Yes ğŸ˜„</button>

  <div class="runArea" id="runArea" aria-label="runaway button area">
    <span class="muted">Try pressing â€œNoâ€ if you dare ğŸ‘‡</span>
    <button class="ghost" id="noBtn">No ğŸ™ƒ</button>
  </div>

  <p id="result" style="margin-top:16px;"></p>
</div>

<script>
  // --- navigation + tiny toast (via alert-ish text) ---
  function showStep(n){
    document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
    document.getElementById('step' + n).classList.remove('hidden');
  }

  function pick(msg, nextStep){
    popHearts(6);
    // small â€œtoastâ€ effect via title swap
    document.title = msg;
    setTimeout(() => (document.title = "Extremely Serious Valentine Research"), 900);
    showStep(nextStep);
    if(nextStep === 3) startEmoMeter();
  }

  // --- emotional distance meter ---
  function startEmoMeter(){
    const fill = document.getElementById('fill');
    const emoText = document.getElementById('emoText');
    fill.style.width = '0%';
    emoText.textContent = 'Processingâ€¦';

    const steps = [
      {w: 22, t: 'Calibrating vibesâ€¦'},
      {w: 55, t: 'Accounting for missing you a littleâ€¦'},
      {w: 82, t: 'Removing â€œdistanceâ€ from the equationâ€¦'},
      {w: 100, t: 'Result: âŒ Not even close.'}
    ];

    let i = 0;
    const timer = setInterval(() => {
      fill.style.width = steps[i].w + '%';
      emoText.textContent = steps[i].t;
      i++;
      if(i >= steps.length) clearInterval(timer);
    }, 900);
  }

  // --- runaway NO button ---
  const noBtn = () => document.getElementById('noBtn');
  const area = () => document.getElementById('runArea');

  function moveNo(){
    const a = area().getBoundingClientRect();
    const b = noBtn().getBoundingClientRect();
    const pad = 10;

    const maxX = a.width - b.width - pad;
    const maxY = a.height - b.height - pad;

    const x = Math.max(pad, Math.floor(Math.random() * maxX));
    const y = Math.max(pad, Math.floor(Math.random() * maxY));

    noBtn().style.left = x + 'px';
    noBtn().style.top = y + 'px';
    noBtn().style.transform = 'none';
  }

  // make it dodge hover/touch
  document.addEventListener('DOMContentLoaded', () => {
    const btn = noBtn();
    btn.addEventListener('mouseenter', () => { moveNo(); popHearts(2); });
    btn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo(); popHearts(2); }, {passive:false});
    // initial random position
    setTimeout(moveNo, 250);
  });

  // --- YES handler ---
  function yesVal(){
    popHearts(18);
    const lines = [
      "Okay wow. Thatâ€™s adorable ğŸ˜„",
      "Official verdict: you just made my day.",
      "Long distance: 1 â€” Us: 100."
    ];
    document.getElementById('result').innerHTML = "<strong>" + lines[Math.floor(Math.random()*lines.length)] + "</strong><br><span class='muted'>Happy Valentineâ€™s Day ğŸ’›</span>";
  }

  // --- floating hearts ---
  function popHearts(n){
    const emojis = ["ğŸ’›","ğŸ’—","ğŸ’˜","ğŸ’“","âœ¨"];
    for(let i=0;i<n;i++){
      const h = document.createElement('div');
      h.className = 'heart';
      h.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      h.style.left = Math.floor(Math.random()*100) + "vw";
      h.style.setProperty('--drift', (Math.floor(Math.random()*80)-40) + "px");
      h.style.fontSize = (14 + Math.random()*18) + "px";
      h.style.animationDuration = (2.6 + Math.random()*2.4) + "s";
      document.body.appendChild(h);
      setTimeout(() => h.remove(), 4200);
    }
  }
</script>

</body>
</html>
